{% extends 'home_index.html' %}
{% load static %}

{% block title %}
Piwit - Perfil
{% endblock %}

{% block content %}
<div id="page-content">

  <!-- CONTENEDOR GLOBAL PARA MODALES HTMX -->
  <div id="modal-container"></div>

  <div class="container my-3">
    <div class="row">
      <div class="col-md-12">

        <div class="card border rounded-10 shadow p-4 mb-3 text-center">

          <!-- CONTENEDOR QUE HTMX ACTUALIZARÁ -->
          <div id="avatar-container">
            <img class="img-thumbnail rounded-circle mb-3 mx-auto"
                 src="{% static user.profile.image %}"
                 alt="Imagen de Perfil"
                 style="width: 100px;">
          </div>

          <h2>{{ user.username }}</h2>
          <p><strong>Nombre de usuario:</strong> {{ user.username }}</p>
          <p><strong>Correo Electrónico:</strong> {{ user.email }}</p>

          <hr>

          <!-- BOTÓN EDITAR PERFIL -->
          <button type="button" class="btn btn-outline-primary"
                  data-bs-toggle="modal"
                  data-bs-target="#editProfileModal">
            Editar Perfil
          </button>

          <!-- BOTÓN PARA ABRIR MODAL HTMX -->
          <button class="btn btn-outline-info mt-2"
                  hx-get="{% url 'choose_avatar' %}"
                  hx-target="#modal-container"
                  hx-swap="innerHTML">
            Cambiar Imagen
          </button>

          <div class="buttons mt-4">

            <button class="btn btn-outline-danger"
                    hx-get="{% url 'deleteacc' %}"
                    hx-target="#main-content"
                    hx-select="#page-content"
                    hx-swap="morphdom"
                    hx-push-url="true">
              Eliminar Usuario
            </button>

            <a href="{% url 'logout' %}"
               class="btn btn-outline-secondary">
               Cerrar Sesión
            </a>

            <button class="btn btn-outline-dark"
                    hx-get="{% url 'home' %}"
                    hx-target="#main-content"
                    hx-select="#page-content"
                    hx-swap="morphdom"
                    hx-push-url="true">
              Regresar
            </button>

          </div>

        </div>

      </div>
    </div>
  </div>

</div>
{% endblock %}
